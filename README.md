# Class Auto Attendance

It automates attendance task for Ada Class todays lesson by using the Ada Class API.

## How to use it

* `npm install`
* Run the createCommandForConsole with API_URL, user, turmaId and teacher names as a parameters
    * `sh ./createCommandForConsole.sh -h https://clazz-api.letscode.com.br/api/v1 -u mario.bros@nintendo.foo -t my-turma-id-123456 -p "'Teacher 001', 'Teacher 002'"`
* After running the shell script, a text will be set to your clipboard. This is the command you have to paste in your on going google meeting session. Go to your browser, in your on going google meeting and paste the command into the browser console. For example:

```javascript
var ClassAPI_;(()=>{"use strict";var e={d:(t,s)=>{for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{App:()=>h});class s{static classAPI={protocol:"https://",host:"class-api-prd.letscode.com.br",path:"/api/v1"}}class a{static isSameDay(e,t){return e instanceof Date&&t instanceof Date&&e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()}}class o{#e="";constructor(e){this.#e=e}async getTodayLesson(e){const t=await this.getLessons(e);let s={};return await t.forEach((async e=>{a.isSameDay(new Date(e.date),new Date)&&(s=e)})),s}async getLessons(e){return await fetch(s.classAPI.protocol+s.classAPI.host+s.classAPI.path+"/Turma/"+e+"/lessons",{headers:{accept:"application/json","accept-language":"en-US,en;q=0.9,pt-PT;q=0.8,pt;q=0.7",authorization:"Bearer "+this.#e,"cache-control":"no-cache",pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site"},body:null,method:"GET",mode:"cors",credentials:"include"}).then((async e=>await e.json()))}}class c{#e="";#t=null;constructor(e,t){t instanceof o&&(this.#t=t),this.#e=e}async getTodayAttendances(e){const t=await this.#t.getTodayLesson(e);return await fetch(s.classAPI.protocol+s.classAPI.host+s.classAPI.path+"/Turma/"+e+"/lessons/"+t.uuid+"/attendances",{headers:{accept:"application/json","accept-language":"en-US,en;q=0.9,pt-PT;q=0.8,pt;q=0.7",authorization:"Bearer "+this.#e,"cache-control":"no-cache",pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site"},body:null,method:"GET",mode:"cors",credentials:"include"}).then((async e=>await e.json()))}}class n{authToken="";#s="";#a="";constructor(e,t){this.#s=e,this.#a=t}async authenticate(){return await fetch(s.classAPI.protocol+s.classAPI.host+s.classAPI.path+"/Auth",{headers:{accept:"application/json","cache-control":"no-cache","content-type":"application/json-patch+json",pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site"},body:'{"email":" '+this.#s+' ","password":"'+this.#a+'"}',method:"POST",mode:"cors",credentials:"omit"})}}class h{#e="";async run(e,t,s){this.#e=await this.doAuth(e,t);const a=new c(this.#e,new o(this.#e)),n=await a.getTodayAttendances(s);console.log(n)}async doAuth(e,t){return new n(e,t).authenticate().then((async e=>(await e.json()).session))}}ClassAPI_=t})();await new ClassAPI_.App().run('mario.bros@nintendo.foo', 'my_very_hard_passowrd_123', 'my-turma-id-123456')
```
Once the bash script `createCommandForConsole.sh` is executed the minified `javascript` program is generated and saved at `./dist/createCommandForConsole.js`, so there is no reason to run the bash script again, you can just copy the `createCommandForConsole.js` content